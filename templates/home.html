<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <header>
        <h1>{{ title }}</h1>
    </header>

    <div class="content-wrapper" style="display: flex; justify-content: center; position: relative;">

        <!-- 左侧图片 -->
        <div class="left-image"
             style="position: absolute;
                     top: 0;
                     bottom: 0;
                     left: 0;
                     width: 25%;
                     height: 100%;
                     background-image: url('{% static 'images/1.jpg' %}');
                     background-size: cover;
                     background-position: center;
                     background-repeat: no-repeat;">

        </div>

        <!-- 右侧图片 -->
        <div class="right-image"
             style="position: absolute;
                     top: 0;
                     bottom: 0;
                     right: 0;
                     width: 25%;
                     height: 100%;
                     background-image: url('{% static 'images/2.jpg' %}');
                     background-size: cover;
                     background-position: center;
                     background-repeat: no-repeat;"
        ></div>

        <!-- main 内容框 -->
        <main style="max-width: 900px; margin: 40px auto; padding: 20px; background-color: white; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); z-index: 1;">
            <h2>选择你的操作</h2>
            <nav>
                <a href="{% url 'add_diary' %}">新增日记</a>
            </nav>

            <h3>所有日记：</h3>
            <ul>
                {% for diary in diaries %}
                    <li>
                        <a href="{% url 'diary_detail' diary.id %}" class="diary-link">
                            <div class="diary-content">
                                <h4>{{ diary.title }}</h4>
                                <p class="diary-date">{{ diary.created_at|date:"Y.m.d H:i:s" }}</p>
                                <p>{{ diary.content|truncatewords:30 }}</p>
                                {% if diary.image %}
                                    <img src="{{ diary.image.url }}" alt="Diary Image" class="diary-image" style="width: 100%; height: auto;">
                                {% endif %}
                            </div>
                        </a>
                        <form method="POST" action="{% url 'delete_diary' diary.id %}" class="delete-form">
                            {% csrf_token %}
                        </form>
                    </li>
                {% empty %}
                    <li>没有任何日记。</li>
                {% endfor %}
            </ul>

            <!-- 分页控件 -->
            <div class="pagination">
                <span class="step-links">
                    {% if diaries.has_previous %}
                        <a href="?page=1">首页</a>
                        <a href="?page={{ diaries.previous_page_number }}">上一页</a>
                    {% endif %}

                    <span class="current">
                        第 {{ diaries.number }} 页 / 共 {{ diaries.paginator.num_pages }} 页
                    </span>

                    {% if diaries.has_next %}
                        <a href="?page={{ diaries.next_page_number }}">下一页</a>
                        <a href="?page={{ diaries.paginator.num_pages }}">尾页</a>
                    {% endif %}
                </span>
            </div>
        </main>

    </div>

    <footer>
        &copy; {{ year }} 我和你 | 记录生活，点滴回忆
    </footer>
</body>
</html>
